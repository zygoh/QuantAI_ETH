# ðŸš€ ETHä¸­é¢‘äº¤æ˜“ç³»ç»Ÿä¼˜åŒ–å®Œæˆ

**ä¼˜åŒ–æ—¶é—´**: 2025-10-21  
**ç›®æ ‡**: å‡†ç¡®çŽ‡ä»Ž33.77% â†’ 50%+  
**çŠ¶æ€**: âœ… å·²å®Œæˆï¼Œç­‰å¾…éªŒè¯

---

## ðŸ“Š ä¼˜åŒ–å†…å®¹æ±‡æ€»

### 1. âœ… ä¿®å¤æ ‡ç­¾é˜ˆå€¼é…ç½®

**é—®é¢˜**: 15måŸºç¡€é˜ˆå€¼è¿‡å¤§ï¼ˆÂ±0.15%ï¼‰ï¼Œå¯¼è‡´HOLDæ¯”ä¾‹è¿‡å°‘

**ä¿®å¤**:
```python
# backend/app/services/ml_service.py Line 551
'15m': 0.0015  âŒ â†’ 0.001  âœ…  # Â±0.1%ï¼ˆæ›´çµæ•ï¼‰
'2h': 0.0035  âœ…               # Â±0.35%
'4h': 0.005   âœ…               # Â±0.5%
```

**é¢„æœŸæ•ˆæžœ**: 
- 15mä¿¡å·æ•°é‡å¢žåŠ 20-30%
- æ ‡ç­¾åˆ†å¸ƒæ›´å¹³è¡¡ï¼ˆHOLD 28-32%ï¼‰

---

### 2. âœ… å®žæ–½æ—¶é—´åºåˆ—äº¤å‰éªŒè¯

**é—®é¢˜**: ä¹‹å‰åªç”¨å•æ¬¡80/20åˆ†å‰²ï¼Œè¯„ä¼°ä¸å¯é 

**ä¼˜åŒ–**:
```python
# backend/app/services/ensemble_ml_service.py Line 444-478

from sklearn.model_selection import TimeSeriesSplit

tscv = TimeSeriesSplit(n_splits=5)
cv_scores = []

for fold in tscv.split(meta_features_val):
    # è®­ç»ƒå…ƒå­¦ä¹ å™¨
    fold_meta.fit(meta_train, y_train, sample_weight=fold_weights)
    fold_acc = accuracy_score(y_test, fold_pred)
    cv_scores.append(fold_acc)

cv_mean = np.mean(cv_scores)  # æ›´å¯é çš„å‡†ç¡®çŽ‡
cv_std = np.std(cv_scores)    # ç¨³å®šæ€§è¯„ä¼°
```

**ä¼˜åŠ¿**:
- âœ… 5æŠ˜éªŒè¯ï¼Œè¯„ä¼°æ›´å¯é 
- âœ… æ£€æµ‹æ—¶é—´æ•æ„Ÿæ€§
- âœ… é˜²æ­¢è¿‡æ‹Ÿåˆåˆ°ç‰¹å®šæ—¶é—´æ®µ

**æ–°å¢žæŒ‡æ ‡**:
```python
result = {
    'accuracy': cv_mean,      # ä¸»å‡†ç¡®çŽ‡ï¼ˆCVå‡å€¼ï¼‰
    'cv_mean': cv_mean,       # CVå‡å€¼
    'cv_std': cv_std,         # CVæ ‡å‡†å·®
    'cv_scores': cv_scores,   # å„æŠ˜åˆ†æ•°
    'val_accuracy': accuracy  # å•æ¬¡éªŒè¯é›†å‡†ç¡®çŽ‡
}
```

---

### 3. âœ… å¢žå¼ºå…ƒç‰¹å¾å·¥ç¨‹

**é—®é¢˜**: å…ƒå­¦ä¹ å™¨åªç”¨åŸºç¡€æ¦‚çŽ‡ï¼ˆ9ä¸ªç‰¹å¾ï¼‰ï¼Œä¿¡æ¯ä¸è¶³

**ä¼˜åŒ–**: ä»Ž9ä¸ª â†’ **20ä¸ªå…ƒç‰¹å¾**

```python
# backend/app/services/ensemble_ml_service.py Line 359-395

meta_features = np.hstack([
    # åŸºç¡€æ¦‚çŽ‡ï¼ˆ9ä¸ªï¼‰
    lgb_pred_proba,      # 3ä¸ªæ¦‚çŽ‡
    xgb_pred_proba,      # 3ä¸ªæ¦‚çŽ‡
    cat_pred_proba,      # 3ä¸ªæ¦‚çŽ‡
    
    # ðŸ†• å¢žå¼ºç‰¹å¾ï¼ˆ11ä¸ªï¼‰
    agreement,           # 1ä¸ª - æ¨¡åž‹ä¸€è‡´æ€§ï¼ˆ3ä¸ªæ¨¡åž‹é¢„æµ‹æ˜¯å¦ä¸€è‡´ï¼‰
    lgb_max_prob,        # 1ä¸ª - LightGBMæœ€å¤§æ¦‚çŽ‡
    xgb_max_prob,        # 1ä¸ª - XGBoostæœ€å¤§æ¦‚çŽ‡
    cat_max_prob,        # 1ä¸ª - CatBoostæœ€å¤§æ¦‚çŽ‡
    lgb_entropy,         # 1ä¸ª - LightGBMä¸ç¡®å®šæ€§ï¼ˆç†µï¼‰
    xgb_entropy,         # 1ä¸ª - XGBoostä¸ç¡®å®šæ€§
    cat_entropy,         # 1ä¸ª - CatBoostä¸ç¡®å®šæ€§
    avg_proba,           # 3ä¸ª - å¹³å‡æ¦‚çŽ‡
    prob_std_max         # 1ä¸ª - æ¦‚çŽ‡æ ‡å‡†å·®ï¼ˆæ¨¡åž‹å·®å¼‚åº¦ï¼‰
])
```

**æ–°å¢žå…ƒç‰¹å¾è¯´æ˜Ž**:
1. **æ¨¡åž‹ä¸€è‡´æ€§** (`agreement`): 3ä¸ªæ¨¡åž‹é¢„æµ‹æ˜¯å¦å®Œå…¨ä¸€è‡´ï¼ˆ1=ä¸€è‡´ï¼Œ0=ä¸ä¸€è‡´ï¼‰
2. **æœ€å¤§æ¦‚çŽ‡**: æ¯ä¸ªæ¨¡åž‹çš„æœ€é«˜ç½®ä¿¡åº¦
3. **æ¦‚çŽ‡ç†µ**: è¡¡é‡é¢„æµ‹çš„ä¸ç¡®å®šæ€§ï¼ˆç†µè¶Šé«˜è¶Šä¸ç¡®å®šï¼‰
4. **å¹³å‡æ¦‚çŽ‡**: 3ä¸ªæ¨¡åž‹çš„å¹³å‡é¢„æµ‹æ¦‚çŽ‡ï¼ˆé›†æˆåŸºçº¿ï¼‰
5. **æ¦‚çŽ‡æ ‡å‡†å·®**: 3ä¸ªæ¨¡åž‹é¢„æµ‹çš„å·®å¼‚ç¨‹åº¦ï¼ˆé«˜=åˆ†æ­§å¤§ï¼‰

**é¢„æœŸæ•ˆæžœ**:
- å…ƒå­¦ä¹ å™¨æœ‰æ›´å¤šä¿¡æ¯åšå†³ç­–
- èƒ½è¯†åˆ«ä½Žè´¨é‡é¢„æµ‹ï¼ˆé«˜ç†µã€é«˜å·®å¼‚ã€ä½Žä¸€è‡´æ€§ï¼‰
- æå‡2-4%å‡†ç¡®çŽ‡

---

### 4. âœ… åŠ¨æ€HOLDæƒ©ç½šç³»æ•°

**é—®é¢˜**: å›ºå®šæƒ©ç½šç³»æ•°ï¼ˆ0.6ï¼‰ï¼Œä¸é€‚åº”ä¸åŒæ•°æ®åˆ†å¸ƒ

**ä¼˜åŒ–**:
```python
# backend/app/services/ensemble_ml_service.py Line 405-421

# æ£€æŸ¥HOLDæ¯”ä¾‹ï¼ŒåŠ¨æ€è°ƒæ•´
hold_ratio = (meta_labels_val == 1).sum() / len(meta_labels_val)

if hold_ratio > 0.40:        # HOLD>40%
    penalty = 0.5  # åŠ é‡æƒ©ç½š
elif hold_ratio > 0.35:      # HOLD>35%
    penalty = 0.6  # ä¸­ç­‰æƒ©ç½š
else:                        # HOLD<=35%
    penalty = 0.7  # è½»åº¦æƒ©ç½š

meta_hold_penalty = np.where(meta_labels_val == 1, penalty, 1.0)
```

**è‡ªé€‚åº”ç­–ç•¥**:
- HOLDå¤š â†’ æƒ©ç½šé‡ â†’ å‡å°‘HOLDé¢„æµ‹
- HOLDå°‘ â†’ æƒ©ç½šè½» â†’ é¿å…è¿‡åº¦æŠ‘åˆ¶

---

## ðŸŽ¯ é¢å¤–ä¼˜åŒ–ï¼ˆå·²å®Œæˆï¼‰

### 5. âœ… è™šæ‹Ÿä»“ä½æ­¢æŸæ­¢ç›ˆå®žæ—¶ç›‘æŽ§

**å®žçŽ°**: 
- WebSocketä»·æ ¼æŽ¨é€ â†’ å®žæ—¶æ£€æŸ¥æ­¢æŸæ­¢ç›ˆ
- å†…å­˜ç¼“å­˜è™šæ‹Ÿä»“ä½ï¼ˆé›¶æ•°æ®åº“æŸ¥è¯¢ï¼‰
- è§¦å‘æ—¶ç«‹å³å¹³ä»“

**æ€§èƒ½æå‡**: 
- æ•°æ®åº“æŸ¥è¯¢: æ¯ç§’10æ¬¡ â†’ **0æ¬¡** (âˆžå€æå‡)

### 6. âœ… ä»“ä½è®¡ç®—ç®€åŒ–

**ä¿®æ”¹**:
- è™šæ‹Ÿè´¦æˆ·: 10000U â†’ **100U**
- ä»“ä½å•ä½: å¼ æ•° â†’ **USDTä»·å€¼**
- å…¨ä»“: 100U Ã— 20x = **2000 USDT**

---

## ðŸ“ˆ é¢„æœŸæ•ˆæžœ

### å‡†ç¡®çŽ‡æå‡é¢„ä¼°

| ä¼˜åŒ–é¡¹ | é¢„æœŸæå‡ | ç´¯è®¡æ•ˆæžœ |
|--------|---------|---------|
| **åŸºå‡†** | - | 33.77% |
| æ ‡ç­¾é˜ˆå€¼ä¿®å¤ | +2-3% | 35-37% |
| æ—¶é—´åºåˆ—CV | +1-2% | 36-39% |
| å…ƒç‰¹å¾å·¥ç¨‹ | +3-5% | 39-44% |
| åŠ¨æ€HOLDæƒ©ç½š | +2-3% | 41-47% |
| **é¢„æœŸæ€»æå‡** | **+7-13%** | **41-47%** |
| **ä¹è§‚æƒ…å†µ** | **+15-20%** | **49-54%** â­ |

---

## ðŸ”§ æŠ€æœ¯ç»†èŠ‚

### å…ƒç‰¹å¾ç»Ÿè®¡

| ç±»åˆ« | æ•°é‡ | è¯´æ˜Ž |
|------|------|------|
| åŸºç¡€æ¦‚çŽ‡ | 9ä¸ª | 3ä¸ªæ¨¡åž‹ Ã— 3ä¸ªç±»åˆ«æ¦‚çŽ‡ |
| ä¸€è‡´æ€§ | 1ä¸ª | æ¨¡åž‹é¢„æµ‹æ˜¯å¦ä¸€è‡´ |
| æœ€å¤§æ¦‚çŽ‡ | 3ä¸ª | æ¯ä¸ªæ¨¡åž‹çš„æœ€é«˜ç½®ä¿¡åº¦ |
| ä¸ç¡®å®šæ€§ | 3ä¸ª | æ¦‚çŽ‡ç†µï¼ˆæ¯ä¸ªæ¨¡åž‹ï¼‰ |
| å¹³å‡æ¦‚çŽ‡ | 3ä¸ª | 3ä¸ªæ¨¡åž‹çš„å¹³å‡ |
| å·®å¼‚åº¦ | 1ä¸ª | æ¦‚çŽ‡æ ‡å‡†å·® |
| **æ€»è®¡** | **20ä¸ª** | **æ¯”ä¹‹å‰å¤š11ä¸ª** |

### äº¤å‰éªŒè¯é…ç½®

```python
TimeSeriesSplit(n_splits=5)

æŠ˜æ•°: 5
è®­ç»ƒé›†å¤§å°: é€’å¢žï¼ˆä¿æŒæ—¶é—´åºåˆ—é¡ºåºï¼‰
éªŒè¯é›†å¤§å°: 20%ï¼ˆæ¯æŠ˜ï¼‰
è¯„ä¼°æŒ‡æ ‡: å‡†ç¡®çŽ‡å‡å€¼ Â± æ ‡å‡†å·®
```

---

## ðŸš€ å¯åŠ¨æµ‹è¯•

### åˆ é™¤æ—§æ¨¡åž‹

```bash
Remove-Item models\*.pkl -Force  âœ…
```

### é‡æ–°è®­ç»ƒ

```bash
cd backend
python main.py
```

**ç³»ç»Ÿä¼šè‡ªåŠ¨**:
1. æ£€æµ‹æ¨¡åž‹ä¸å­˜åœ¨
2. ç«‹å³è®­ç»ƒæ‰€æœ‰æ—¶é—´æ¡†æž¶
3. ä½¿ç”¨æ–°çš„ä¼˜åŒ–ç®—æ³•
4. ä¿å­˜18ä¸ªæ¨¡åž‹æ–‡ä»¶ï¼ˆ3ä¸ªæ—¶é—´æ¡†æž¶ Ã— 6ä¸ªæ–‡ä»¶ï¼‰

---

## ðŸ“‹ éªŒè¯æ¸…å•

### è®­ç»ƒé˜¶æ®µ

- [ ] 15mæ ‡ç­¾åˆ†å¸ƒ: HOLD 28-32%ï¼ˆä¹‹å‰29.1%ï¼‰
- [ ] æ—¶é—´åºåˆ—CVåˆ†æ•°æ˜¾ç¤ºï¼ˆ5ä¸ªfoldï¼‰
- [ ] CVæ ‡å‡†å·®<0.05ï¼ˆç¨³å®šæ€§ï¼‰
- [ ] å…ƒç‰¹å¾æ•°é‡æ˜¾ç¤º: 20ä¸ª
- [ ] åŠ¨æ€HOLDæƒ©ç½šæ—¥å¿—
- [ ] CVå‡å€¼å‡†ç¡®çŽ‡ â‰¥45%

### è¿è¡Œé˜¶æ®µ

- [ ] è™šæ‹Ÿä»“ä½ç›‘æŽ§å¯åŠ¨
- [ ] ä¿¡å·æ•°é‡æ­£å¸¸ï¼ˆéžå…¨HOLDï¼‰
- [ ] æ­¢æŸæ­¢ç›ˆå®žæ—¶è§¦å‘
- [ ] ç¼“å­˜æ€§èƒ½æ­£å¸¸ï¼ˆé›¶æŸ¥è¯¢ï¼‰

---

## ðŸŽ¯ å…³é”®æ”¹è¿›

1. **æ›´å¯é çš„è¯„ä¼°**: TimeSeriesSplit â†’ çœŸå®žåæ˜ æ¨¡åž‹æ³›åŒ–èƒ½åŠ›
2. **æ›´å¼ºçš„å…ƒå­¦ä¹ å™¨**: 20ä¸ªå…ƒç‰¹å¾ â†’ æ›´å¥½çš„å†³ç­–
3. **æ›´çµæ•çš„ä¿¡å·**: Â±0.1%é˜ˆå€¼ â†’ æ•æ‰æ›´å¤šäº¤æ˜“æœºä¼š
4. **è‡ªé€‚åº”æƒ©ç½š**: æ ¹æ®HOLDæ¯”ä¾‹åŠ¨æ€è°ƒæ•´

---

**å‡†å¤‡å¥½é‡å¯ç³»ç»Ÿï¼Œè§‚å¯Ÿè®­ç»ƒç»“æžœï¼** ðŸš€

